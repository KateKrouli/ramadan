(() => {
  // src/js/i18n/translations.js
  var translations = {
    en: {
      app: {
        title: "Fasting Time",
        date: "Day",
        ramadan: "Ramadan"
      },
      dropdown: {
        placeholder: "Select location",
        locations: {
          "Mecca, Saudi Arabi": "Mecca, Saudi Arabia",
          "Medina, Saudi Arabia": "Medina, Saudi Arabia",
          "Riyadh, Saudi Arabia": "Riyadh, Saudi Arabia",
          "Jeddah, Saudi Arabia": "Jeddah, Saudi Arabia",
          "Dubai, United Arab Emirates": "Dubai, United Arab Emirates",
          "Abu Dhabi, United Arab Emirates": "Abu Dhabi, United Arab Emirates",
          "Cairo, Egypt": "Cairo, Egypt",
          "Istanbul, Turkey": "Istanbul, Turkey",
          "Ankara, Turkey": "Ankara, Turkey",
          "Doha, Qatar": "Doha, Qatar",
          "Kuwait City, Kuwait": "Kuwait City, Kuwait",
          "Manama, Bahrain": "Manama, Bahrain",
          "Muscat, Oman": "Muscat, Oman",
          "Amman, Jordan": "Amman, Jordan",
          "Jerusalem / Al-Quds": "Jerusalem / Al-Quds",
          "Beirut, Lebanon": "Beirut, Lebanon",
          "Casablanca, Morocco": "Casablanca, Morocco",
          "Rabat, Morocco": "Rabat, Morocco",
          "Tunis, Tunisi": "Tunis, Tunisia",
          "Algiers, Algeria": "Algiers, Algeria",
          "Karachi, Pakistan": "Karachi, Pakistan",
          "Lahore, Pakistan": "Lahore, Pakistan",
          "Dhaka, Bangladesh": "Dhaka, Bangladesh",
          "Delhi, India": "Delhi, India",
          "Jakarta, Indonesia": "Jakarta, Indonesia",
          "Kuala Lumpur, Malaysia": "Kuala Lumpur, Malaysia",
          "London, United Kingdom": "London, United Kingdom",
          "Paris, France": "Paris, France",
          "Berlin, Germany": "Berlin, Germany",
          "Amsterdam, Netherlands": "Amsterdam, Netherlands",
          "New York, United States": "New York, United States",
          "Toronto, Canada": "Toronto, Canada",
          "Sydney, Australia": "Sydney, Australia"
        }
      },
      footer: {
        btn: "Share Journey"
      },
      popup: {
        header: "Share Journey",
        title: {
          day: "Fasting Today",
          night: "Fasting Completed"
        },
        copyBtn: "Copy Image"
      },
      language: {
        en: "English",
        ar: "Arabic"
      },
      sound: {
        play: "Play",
        mute: "Mute"
      },
      timer: {
        complete: "May your fast be accepted",
        iftar: "Iftar Time"
      },
      error: {
        cityNotFound: "City not found"
      }
    },
    ar: {
      app: {
        title: "\u0648\u0642\u062A \u0627\u0644\u0635\u064A\u0627\u0645",
        date: "\u0627\u0644\u064A\u0648\u0645",
        ramadan: "\u0631\u0645\u0636\u0627\u0646"
      },
      dropdown: {
        placeholder: "\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0648\u0642\u0639",
        locations: {
          "Mecca, Saudi Arabi": "\u0645\u0643\u0629\u060C \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629",
          "Medina, Saudi Arabia": "\u0627\u0644\u0645\u062F\u064A\u0646\u0629 \u0627\u0644\u0645\u0646\u0648\u0631\u0629\u060C \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629",
          "Riyadh, Saudi Arabia": "\u0627\u0644\u0631\u064A\u0627\u0636\u060C \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629",
          "Jeddah, Saudi Arabia": "\u062C\u062F\u0629\u060C \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629",
          "Dubai, United Arab Emirates": "\u062F\u0628\u064A\u060C \u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062A \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0645\u062A\u062D\u062F\u0629",
          "Abu Dhabi, United Arab Emirates": "\u0623\u0628\u0648 \u0638\u0628\u064A\u060C \u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062A \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0645\u062A\u062D\u062F\u0629",
          "Cairo, Egypt": "\u0627\u0644\u0642\u0627\u0647\u0631\u0629\u060C \u0645\u0635\u0631",
          "Istanbul, Turkey": "\u0627\u0633\u0637\u0646\u0628\u0648\u0644\u060C \u062A\u0631\u0643\u064A\u0627",
          "Ankara, Turkey": "\u0623\u0646\u0642\u0631\u0629\u060C \u062A\u0631\u0643\u064A\u0627",
          "Doha, Qatar": "\u0627\u0644\u062F\u0648\u062D\u0629\u060C \u0642\u0637\u0631",
          "Kuwait City, Kuwait": "\u0645\u062F\u064A\u0646\u0629 \u0627\u0644\u0643\u0648\u064A\u062A\u060C \u0627\u0644\u0643\u0648\u064A\u062A",
          "Manama, Bahrain": "\u0627\u0644\u0645\u0646\u0627\u0645\u0629\u060C \u0627\u0644\u0628\u062D\u0631\u064A\u0646",
          "Muscat, Oman": "\u0645\u0633\u0642\u0637\u060C \u0639\u0645\u0627\u0646",
          "Amman, Jordan": "\u0639\u0645\u0651\u0627\u0646\u060C \u0627\u0644\u0623\u0631\u062F\u0646",
          "Jerusalem / Al-Quds": "\u0627\u0644\u0642\u062F\u0633",
          "Beirut, Lebanon": "\u0628\u064A\u0631\u0648\u062A\u060C \u0644\u0628\u0646\u0627\u0646",
          "Casablanca, Morocco": "\u0627\u0644\u062F\u0627\u0631 \u0627\u0644\u0628\u064A\u0636\u0627\u0621\u060C \u0627\u0644\u0645\u063A\u0631\u0628",
          "Rabat, Morocco": "\u0627\u0644\u0631\u0628\u0627\u0637\u060C \u0627\u0644\u0645\u063A\u0631\u0628",
          "Tunis, Tunisi": "\u062A\u0648\u0646\u0633\u060C \u062A\u0648\u0646\u0633",
          "Algiers, Algeria": "\u0627\u0644\u062C\u0632\u0627\u0626\u0631\u060C \u0627\u0644\u062C\u0632\u0627\u0626\u0631",
          "Karachi, Pakistan": "\u0643\u0631\u0627\u062A\u0634\u064A\u060C \u0628\u0627\u0643\u0633\u062A\u0627\u0646",
          "Lahore, Pakistan": "\u0644\u0627\u0647\u0648\u0631\u060C \u0628\u0627\u0643\u0633\u062A\u0627\u0646",
          "Dhaka, Bangladesh": "\u062F\u0627\u0643\u0627\u060C \u0628\u0646\u063A\u0644\u0627\u062F\u064A\u0634",
          "Delhi, India": "\u062F\u0644\u0647\u064A\u060C \u0627\u0644\u0647\u0646\u062F",
          "Jakarta, Indonesia": "\u062C\u0627\u0643\u0631\u062A\u0627\u060C \u0625\u0646\u062F\u0648\u0646\u064A\u0633\u064A\u0627",
          "Kuala Lumpur, Malaysia": "\u0643\u0648\u0627\u0644\u0627\u0644\u0645\u0628\u0648\u0631\u060C \u0645\u0627\u0644\u064A\u0632\u064A\u0627",
          "London, United Kingdom": "\u0644\u0646\u062F\u0646\u060C \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0645\u062A\u062D\u062F\u0629",
          "Paris, France": "\u0628\u0627\u0631\u064A\u0633\u060C \u0641\u0631\u0646\u0633\u0627",
          "Berlin, Germany": "\u0628\u0631\u0644\u064A\u0646\u060C \u0623\u0644\u0645\u0627\u0646\u064A\u0627",
          "Amsterdam, Netherlands": "\u0623\u0645\u0633\u062A\u0631\u062F\u0627\u0645\u060C \u0647\u0648\u0644\u0646\u062F\u0627",
          "New York, United States": "\u0646\u064A\u0648\u064A\u0648\u0631\u0643\u060C \u0627\u0644\u0648\u0644\u0627\u064A\u0627\u062A \u0627\u0644\u0645\u062A\u062D\u062F\u0629",
          "Toronto, Canada": "\u062A\u0648\u0631\u0648\u0646\u062A\u0648\u060C \u0643\u0646\u062F\u0627",
          "Sydney, Australia": "\u0633\u064A\u062F\u0646\u064A\u060C \u0623\u0633\u062A\u0631\u0627\u0644\u064A\u0627"
        }
      },
      footer: {
        btn: "\u0634\u0627\u0631\u0643 \u0631\u062D\u0644\u062A\u0643"
      },
      popup: {
        header: "\u0634\u0627\u0631\u0643 \u0631\u062D\u0644\u062A\u0643",
        title: {
          day: "\u0627\u0644\u0635\u064A\u0627\u0645 \u0627\u0644\u064A\u0648\u0645",
          night: "\u062A\u0645 \u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0635\u064A\u0627\u0645"
        },
        copyBtn: "\u0627\u0646\u0633\u062E \u0627\u0644\u0635\u0648\u0631\u0629"
      },
      language: {
        en: "\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629",
        ar: "\u0627\u0644\u0639\u0631\u0628\u064A\u0629"
      },
      sound: {
        play: "\u062A\u0634\u063A\u064A\u0644",
        mute: "\u0643\u062A\u0645 \u0627\u0644\u0635\u0648\u062A"
      },
      timer: {
        complete: "\u0642\u0628\u0644 \u0627\u0644\u0644\u0647 \u0635\u064A\u0627\u0645\u0643",
        iftar: "\u0648\u0642\u062A \u0627\u0644\u0625\u0641\u0637\u0627\u0631"
      },
      error: {
        cityNotFound: "\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0645\u062F\u064A\u0646\u0629"
      }
    }
  };

  // src/js/i18n/index.js
  var i18n = {
    currentLang: localStorage.getItem("language") || "en",
    init() {
      this.currentLang = localStorage.getItem("language") || "en";
      this.updatePageLanguage();
      this.updateLanguageButtons();
    },
    setLanguage(lang) {
      if (lang === "en" || lang === "ar") {
        this.currentLang = lang;
        localStorage.setItem("language", lang);
        this.updatePageLanguage();
        this.updateDOM();
        this.updateLanguageButtons();
      }
    },
    getLanguage() {
      return this.currentLang;
    },
    t(key) {
      const keys = key.split(".");
      let value = translations[this.currentLang];
      for (const k of keys) {
        value = value?.[k];
      }
      return value || key;
    },
    updatePageLanguage() {
      const htmlElement = document.documentElement;
      htmlElement.lang = this.currentLang;
      htmlElement.dir = this.currentLang === "ar" ? "rtl" : "ltr";
    },
    updateDOM() {
      document.querySelectorAll("[data-i18]").forEach((el) => {
        const key = el.getAttribute("data-i18");
        const text = this.t(key);
        el.textContent = text;
      });
    },
    updateLanguageButtons() {
      document.querySelectorAll(".lang-btn").forEach((btn) => {
        const lang = btn.getAttribute("data-lang");
        if (lang === this.currentLang) {
          btn.classList.add("selected");
        } else {
          btn.classList.remove("selected");
        }
      });
    }
  };

  // src/js/config/locations.js
  var LOCATIONS = [
    { label: "Mecca, Saudi Arabi", query: "Mecca, Saudi Arabia" },
    { label: "Medina, Saudi Arabia", query: "Medina, Saudi Arabia" },
    { label: "Riyadh, Saudi Arabia", query: "Riyadh, Saudi Arabia" },
    { label: "Jeddah, Saudi Arabia", query: "Jeddah, Saudi Arabia" },
    { label: "Dubai, United Arab Emirates", query: "Dubai, United Arab Emirates" },
    { label: "Abu Dhabi, United Arab Emirates", query: "Abu Dhabi, United Arab Emirates" },
    { label: "Cairo, Egypt", query: "Cairo, Egypt" },
    { label: "Istanbul, Turkey", query: "Istanbul, Turkey" },
    { label: "Ankara, Turkey", query: "Ankara, Turkey" },
    { label: "Doha, Qatar", query: "Doha, Qatar" },
    { label: "Kuwait City, Kuwait", query: "Kuwait City, Kuwait" },
    { label: "Manama, Bahrain", query: "Manama, Bahrain" },
    { label: "Muscat, Oman", query: "Muscat, Oman" },
    { label: "Amman, Jordan", query: "Amman, Jordan" },
    { label: "Jerusalem / Al-Quds", query: "Jerusalem" },
    { label: "Beirut, Lebanon", query: "Beirut, Lebanon" },
    { label: "Casablanca, Morocco", query: "Casablanca, Morocco" },
    { label: "Rabat, Morocco", query: "Rabat, Morocco" },
    { label: "Tunis, Tunisi", query: "Tunis, Tunisia" },
    { label: "Algiers, Algeria", query: "Algiers, Algeria" },
    { label: "Karachi, Pakistan", query: "Karachi, Pakistan" },
    { label: "Lahore, Pakistan", query: "Lahore, Pakistan" },
    { label: "Dhaka, Bangladesh", query: "Dhaka, Bangladesh" },
    { label: "Delhi, India", query: "Delhi, India" },
    { label: "Jakarta, Indonesia", query: "Jakarta, Indonesia" },
    { label: "Kuala Lumpur, Malaysia", query: "Kuala Lumpur, Malaysia" },
    { label: "London, United Kingdom", query: "London, United Kingdom" },
    { label: "Paris, France", query: "Paris, France" },
    { label: "Berlin, Germany", query: "Berlin, Germany" },
    { label: "Amsterdam, Netherlands", query: "Amsterdam, Netherlands" },
    { label: "New York, United States", query: "New York, United States" },
    { label: "Toronto, Canada", query: "Toronto, Canada" },
    { label: "Sydney, Australia", query: "Sydney, Australia" }
  ];

  // src/js/ui/dropdown.js
  function initDropdown(onSelect) {
    const dropdown2 = document.getElementById("locationDropdown");
    const toggle = document.getElementById("dropdownToggle");
    const valueEl = toggle.querySelector(".dropdown__value");
    const menu = document.getElementById("dropdownMenu");
    if (!dropdown2 || !toggle || !menu)
      return;
    LOCATIONS.forEach(({ label, query }) => {
      const item = document.createElement("li");
      item.className = "dropdown__item";
      const translatedLabel = i18n.t(`dropdown.locations.${label}`) || label;
      item.textContent = translatedLabel;
      item.dataset.query = query;
      item.dataset.label = label;
      item.addEventListener("click", () => {
        valueEl.textContent = translatedLabel;
        closeDropdown();
        onSelect(query, label);
      });
      menu.appendChild(item);
    });
    toggle.addEventListener("click", (e) => {
      e.stopPropagation();
      dropdown2.classList.toggle("dropdown--open");
    });
    document.addEventListener("click", () => {
      closeDropdown();
    });
    function closeDropdown() {
      dropdown2.classList.remove("dropdown--open");
    }
    if (LOCATIONS.length) {
      const savedLocation = localStorage.getItem("selectedLocation");
      const locationToUse = LOCATIONS.find((loc) => loc.query === savedLocation) || LOCATIONS[0];
      const translatedLabel = i18n.t(`dropdown.locations.${locationToUse.label}`) || locationToUse.label;
      valueEl.textContent = translatedLabel;
      onSelect(locationToUse.query, locationToUse.label);
    }
    window.updateDropdownLabels = function() {
      menu.querySelectorAll("li").forEach((item) => {
        const label = item.dataset.label;
        const translatedLabel = i18n.t(`dropdown.locations.${label}`) || label;
        item.textContent = translatedLabel;
        if (item.classList.contains("dropdown__item--selected")) {
          valueEl.textContent = translatedLabel;
        }
      });
    };
  }

  // src/js/ui/mode.js
  function setMode(mode) {
    const root = document.getElementById("root");
    root.classList.remove("night", "day");
    root.classList.add(mode === "night" ? "night" : "day");
  }

  // src/js/ui/render.js
  function renderTimer(valueOrMode) {
    const timerEl = document.getElementById("timer");
    if (!timerEl)
      return;
    const titleEl = document.querySelector(".app__title");
    const contentEl = document.querySelector(".app__content");
    if (valueOrMode === "night-complete") {
      if (titleEl)
        titleEl.textContent = i18n.t("timer.iftar");
      contentEl.style.display = "none";
      timerEl.classList.add("timer--complete");
      timerEl.textContent = i18n.t("timer.complete");
      return;
    }
    timerEl.innerHTML = valueOrMode;
    if (titleEl)
      titleEl.textContent = i18n.t("app.title");
  }
  function renderQuote(text) {
    const el = document.getElementById("quote");
    if (!el)
      return;
    el.textContent = `\u201C${text}.\u201D`;
  }

  // src/js/api/location.js
  async function getCoords(city) {
    const res = await fetch(
      `/api/geocode?q=${encodeURIComponent(city)}`
    );
    const data = await res.json();
    if (!data || data.length === 0) {
      throw new Error(i18n.t("error.cityNotFound"));
    }
    return {
      lat: parseFloat(data[0].lat),
      lon: parseFloat(data[0].lon)
    };
  }

  // src/js/api/prayers.js
  async function getPrayerTimes(lat, lon) {
    const today = (/* @__PURE__ */ new Date()).toISOString().slice(0, 10);
    const res = await fetch(
      `https://api.aladhan.com/v1/timings/${today}?latitude=${lat}&longitude=${lon}&method=2`
    );
    const data = await res.json();
    const timings = data.data.timings;
    return {
      fajr: toDate(timings.Fajr),
      maghrib: toDate(timings.Maghrib)
    };
  }
  function toDate(timeStr) {
    const [h, m] = timeStr.split(":");
    const d = /* @__PURE__ */ new Date();
    d.setHours(+h, +m, 0, 0);
    return d;
  }

  // src/js/core/timer.js
  function startTimer(target, onTick, onEnd) {
    let intervalId = null;
    function tick() {
      const now2 = /* @__PURE__ */ new Date();
      const diff = target - now2;
      if (diff <= 0) {
        clearInterval(intervalId);
        onEnd();
        return;
      }
      const h = Math.floor(diff / 36e5);
      const m = Math.floor(diff % 36e5 / 6e4);
      const s = Math.floor(diff % 6e4 / 1e3);
      const formatted = `${h.toString().padStart(2, "0")}<span>:</span>${m.toString().padStart(2, "0")}<span>:</span>${s.toString().padStart(2, "0")}`;
      onTick(formatted);
    }
    tick();
    intervalId = setInterval(tick, 1e3);
    return intervalId;
  }

  // src/js/core/state.js
  var state = {
    fajr: null,
    maghrib: null,
    mode: null,
    lastFajrDate: null,
    currentLocationLabel: null,
    currentLocationQuery: null,
    currentDate: /* @__PURE__ */ new Date()
  };

  // src/js/core/dayCounter.js
  var HOLIDAY_START_DATE = "2026-03-11";
  var HOLIDAY_TOTAL_DAYS = 30;
  function normalizeDate(date) {
    const d = new Date(date);
    d.setHours(0, 0, 0, 0);
    return d;
  }
  function getHolidayDayNumber(currentDate = /* @__PURE__ */ new Date()) {
    const start = normalizeDate(HOLIDAY_START_DATE);
    const current = normalizeDate(currentDate);
    const diffDays = Math.floor(
      (current - start) / (1e3 * 60 * 60 * 24)
    );
    const dayNumber = diffDays + 1;
    if (dayNumber < 1)
      return 1;
    if (dayNumber > HOLIDAY_TOTAL_DAYS)
      return HOLIDAY_TOTAL_DAYS;
    return dayNumber;
  }
  function formatFullDate(date, lang = "en") {
    const options = {
      weekday: "long",
      month: "long",
      day: "numeric"
    };
    if (lang === "ar") {
      return date.toLocaleDateString("ar-SA", options);
    }
    return date.toLocaleDateString("en-US", options);
  }
  function formatHolidayLine(currentDate = /* @__PURE__ */ new Date()) {
    const lang = i18n.getLanguage();
    const fullDate = formatFullDate(currentDate, lang);
    const dayNumber = getHolidayDayNumber(currentDate);
    const dayLabel = i18n.t("app.date");
    return `${fullDate} \xB7 ${dayLabel} ${dayNumber} ${lang === "ar" ? "\u0645\u0646" : "of"} ${HOLIDAY_TOTAL_DAYS}`;
  }
  function renderHolidayDay(currentDate = /* @__PURE__ */ new Date()) {
    const el = document.getElementById("day");
    if (!el)
      return;
    el.textContent = formatHolidayLine(currentDate);
  }

  // src/js/core/quotes.js
  var QUOTES = [
    {
      ar: "\u0627\u0644\u0635\u0628\u0631 \u0645\u0641\u062A\u0627\u062D \u0627\u0644\u0641\u0631\u062C",
      en: "Patience is the key to relief"
    },
    {
      ar: "\u0625\u0650\u0646\u0651\u064E \u0645\u064E\u0639\u064E \u0627\u0644\u0652\u0639\u064F\u0633\u0652\u0631\u0650 \u064A\u064F\u0633\u0652\u0631\u064B\u0627",
      en: "Indeed, with hardship comes ease"
    },
    {
      ar: "\u0648\u064E\u0627\u0635\u0652\u0628\u0650\u0631\u0652 \u0641\u064E\u0625\u0650\u0646\u0651\u064E \u0627\u0644\u0644\u0651\u064E\u0647\u064E \u0644\u064E\u0627 \u064A\u064F\u0636\u0650\u064A\u0639\u064F \u0623\u064E\u062C\u0652\u0631\u064E \u0627\u0644\u0652\u0645\u064F\u062D\u0652\u0633\u0650\u0646\u0650\u064A\u0646\u064E",
      en: "Be patient, for Allah does not let the reward of the righteous be lost"
    },
    {
      ar: "\u0631\u0645\u0636\u0627\u0646 \u0634\u0647\u0631 \u0627\u0644\u0631\u062D\u0645\u0629 \u0648\u0627\u0644\u0645\u063A\u0641\u0631\u0629",
      en: "Ramadan is the month of mercy and forgiveness"
    },
    {
      ar: "\u0642\u0644\u0628\u064C \u0645\u062A\u0648\u0643\u0644\u064C \u0639\u0644\u0649 \u0627\u0644\u0644\u0647 \u0644\u0627 \u064A\u064F\u0647\u0632\u0645",
      en: "A heart that trusts Allah is never defeated"
    },
    {
      ar: "\u0643\u0644 \u062A\u0623\u062E\u064A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0647 \u0647\u0648 \u0639\u0637\u0627\u0621",
      en: "Every delay from Allah is a gift"
    },
    {
      ar: "\u0627\u0644\u062F\u0639\u0627\u0621 \u064A\u063A\u064A\u0631 \u0627\u0644\u0642\u062F\u0631",
      en: "Supplication changes destiny"
    },
    {
      ar: "\u0627\u0644\u0637\u0645\u0623\u0646\u064A\u0646\u0629 \u062A\u0623\u062A\u064A \u0645\u0646 \u0627\u0644\u0642\u0631\u0628 \u0645\u0646 \u0627\u0644\u0644\u0647",
      en: "Peace comes from closeness to Allah"
    },
    {
      ar: "\u0645\u0627 \u062E\u0627\u0628 \u0645\u0646 \u0627\u0633\u062A\u062E\u0627\u0631",
      en: "Whoever seeks guidance from Allah is never disappointed"
    },
    {
      ar: "\u0627\u0644\u0635\u0628\u0631 \u062C\u0645\u064A\u0644",
      en: "Beautiful patience brings beautiful outcomes"
    },
    {
      ar: "\u062B\u0642 \u0628\u0627\u0644\u0644\u0647\u060C \u0641\u0627\u0644\u0644\u0647 \u0644\u0627 \u064A\u062E\u0630\u0644 \u0639\u0628\u062F\u0647",
      en: "Trust Allah; He never abandons His servant"
    },
    {
      ar: "\u0627\u0644\u062E\u064A\u0631 \u0641\u064A\u0645\u0627 \u0627\u062E\u062A\u0627\u0631\u0647 \u0627\u0644\u0644\u0647",
      en: "Good lies in what Allah chooses"
    },
    {
      ar: "\u0643\u0644 \u0634\u064A\u0621 \u0628\u0642\u062F\u0631",
      en: "Everything happens by divine decree"
    },
    {
      ar: "\u0627\u0644\u0644\u0647 \u0623\u0642\u0631\u0628 \u0645\u0645\u0627 \u062A\u0638\u0646",
      en: "Allah is closer than you think"
    },
    {
      ar: "\u0627\u0644\u0642\u0644\u0628 \u0627\u0644\u0635\u0627\u0628\u0631 \u0623\u0642\u0648\u0649 \u0645\u0646 \u0643\u0644 \u0627\u0644\u0638\u0631\u0648\u0641",
      en: "A patient heart is stronger than any circumstance"
    },
    {
      ar: "\u0644\u0627 \u062A\u064A\u0623\u0633\u060C \u0641\u0625\u0646 \u0627\u0644\u0644\u0647 \u0645\u0639\u0643",
      en: "Do not despair; Allah is with you"
    },
    {
      ar: "\u0641\u064A \u0627\u0644\u0635\u0628\u0631 \u0623\u062C\u0631 \u0628\u0644\u0627 \u062D\u0633\u0627\u0628",
      en: "In patience lies reward without measure"
    },
    {
      ar: "\u0627\u0637\u0645\u0626\u0646\u060C \u0641\u0627\u0644\u0644\u0647 \u064A\u062F\u0628\u0631 \u0627\u0644\u0623\u0645\u0631",
      en: "Be at ease; Allah is managing all affairs"
    },
    {
      ar: "\u0627\u0644\u0623\u0645\u0644 \u0639\u0628\u0627\u062F\u0629",
      en: "Hope is an act of worship"
    },
    {
      ar: "\u0645\u0627 \u0628\u0639\u062F \u0627\u0644\u0635\u0628\u0631 \u0625\u0644\u0627 \u0627\u0644\u0641\u0631\u062C",
      en: "After patience comes relief"
    },
    {
      ar: "\u062B\u0642 \u0623\u0646 \u0627\u0644\u0644\u0647 \u064A\u0639\u0644\u0645 \u0645\u0627 \u0641\u064A \u0642\u0644\u0628\u0643",
      en: "Trust that Allah knows what is in your heart"
    },
    {
      ar: "\u0627\u0644\u0633\u0643\u064A\u0646\u0629 \u0647\u062F\u064A\u0629 \u0645\u0646 \u0627\u0644\u0644\u0647",
      en: "Tranquility is a gift from Allah"
    },
    {
      ar: "\u0644\u0627 \u0634\u064A\u0621 \u0645\u0633\u062A\u062D\u064A\u0644 \u0645\u0639 \u0627\u0644\u0644\u0647",
      en: "Nothing is impossible with Allah"
    },
    {
      ar: "\u0627\u0644\u0641\u0631\u062C \u0642\u0631\u064A\u0628",
      en: "Relief is near"
    },
    {
      ar: "\u0627\u0644\u0631\u0636\u0627 \u0628\u0627\u0628 \u0627\u0644\u0633\u0639\u0627\u062F\u0629",
      en: "Contentment is the door to happiness"
    },
    {
      ar: "\u0627\u0644\u0644\u0647 \u0644\u0627 \u064A\u0646\u0633\u0649 \u0639\u0628\u0627\u062F\u0647",
      en: "Allah never forgets His servants"
    },
    {
      ar: "\u0643\u0644 \u062F\u0639\u0627\u0621 \u0645\u0633\u0645\u0648\u0639",
      en: "Every prayer is heard"
    },
    {
      ar: "\u0627\u0644\u062A\u0648\u0643\u0644 \u0631\u0627\u062D\u0629",
      en: "Trusting Allah brings peace"
    },
    {
      ar: "\u0645\u0646 \u062A\u0648\u0643\u0644 \u0639\u0644\u0649 \u0627\u0644\u0644\u0647 \u0643\u0641\u0627\u0647",
      en: "Whoever relies on Allah, He is sufficient for him"
    },
    {
      ar: "\u0627\u0644\u0644\u0647 \u0623\u0631\u062D\u0645 \u0628\u0643 \u0645\u0646 \u0646\u0641\u0633\u0643",
      en: "Allah is more merciful to you than you are to yourself"
    }
  ];
  function pickDailyQuote(currentDate = /* @__PURE__ */ new Date(), lang = "en") {
    const dayNumber = getHolidayDayNumber(currentDate);
    const index = (dayNumber - 1) % QUOTES.length;
    return QUOTES[index][lang];
  }

  // src/js/core/shareSummary.js
  function buildShareSummary({ date = /* @__PURE__ */ new Date(), locationLabel }) {
    const day = getHolidayDayNumber(date);
    const lang = i18n.getLanguage();
    const dayLabel = i18n.t("app.date");
    const ramadanLabel = i18n.t("app.ramadan");
    let translatedLocation = locationLabel;
    if (locationLabel) {
      const location = LOCATIONS.find((loc) => loc.label === locationLabel);
      if (location) {
        translatedLocation = i18n.t(`dropdown.locations.${location.label}`) || location.label;
      }
    }
    return `${dayLabel} ${day} ${lang === "ar" ? "\u0645\u0646" : "of"} ${ramadanLabel} \xB7 ${translatedLocation}`;
  }

  // src/js/ui/sharePopup.js
  var html2canvas = window.html2canvas;
  var currentSummary = "";
  var isSharing = false;
  var previewImg = null;
  function initSharePopup() {
    const popup = document.querySelector(".share-popup");
    const closeBtn = popup?.querySelector(".share-popup__close-btn");
    closeBtn?.addEventListener("click", () => {
      closePopup();
      removePreview();
    });
  }
  function openSharePopup({ date, locationLabel }) {
    const overlay = document.querySelector(".overlay");
    const popup = document.querySelector(".share-popup");
    if (!popup || !overlay)
      return;
    currentSummary = buildShareSummary({ date, locationLabel });
    const summaryEl = popup.querySelector(".share-popup__summary");
    if (summaryEl)
      summaryEl.textContent = currentSummary;
    overlay.classList.add("is-visible");
  }
  function closePopup() {
    const overlay = document.querySelector(".overlay");
    overlay?.classList.remove("is-visible");
    removePreview();
  }
  function initShareActions() {
    const popup = document.querySelector(".share-popup");
    if (!popup)
      return;
    const copyTextBtn = popup.querySelector(".share-popup__action-btn--copy-text");
    const copyImageBtn = popup.querySelector(".share-popup__action-btn--copy-image");
    const shareNativeBtn = popup.querySelector(".share-popup__action-link--share");
    const shareInstagramBtn = popup.querySelector(".share-popup__action-link--share-inst");
    const shareWhatsAppBtn = popup.querySelector(".share-popup__action-link--share-whatsapp");
    const shareTelegramBtn = popup.querySelector(".share-popup__action-link--share-telegram");
    const contentEl = popup.querySelector(".share-popup__content");
    copyTextBtn?.addEventListener("click", async () => {
      if (!currentSummary)
        return;
      try {
        await navigator.clipboard.writeText(currentSummary);
        copyTextBtn.textContent = "Copied";
        setTimeout(() => copyTextBtn.textContent = "Copy Text", 1500);
      } catch (err) {
        console.error("Copy failed:", err);
      }
    });
    copyImageBtn?.addEventListener("click", async () => {
      try {
        if (!previewImg) {
          const canvas = await html2canvas(contentEl);
          const dataUrl = canvas.toDataURL("image/png");
          showPreview(popup, dataUrl);
        }
        const response = await fetch(previewImg.src);
        const blob = await response.blob();
        await navigator.clipboard.write([new ClipboardItem({ [blob.type]: blob })]);
        copyImageBtn.textContent = "Copied";
        setTimeout(() => copyImageBtn.textContent = "Copy Image", 1500);
      } catch (err) {
        console.error("Copy image failed:", err);
      }
    });
    shareNativeBtn?.addEventListener("click", async (e) => {
      e.preventDefault();
      if (isSharing)
        return;
      if (!navigator.share)
        return;
      const payload = buildSharePayload(popup);
      if (!payload)
        return;
      try {
        isSharing = true;
        await navigator.share(payload);
      } catch (err) {
        if (err.name !== "AbortError")
          console.error("Share failed:", err);
      } finally {
        isSharing = false;
      }
    });
    shareInstagramBtn?.addEventListener("click", async (e) => {
      e.preventDefault();
      try {
        const canvas = await html2canvas(contentEl);
        const dataUrl = canvas.toDataURL("image/png");
        showPreview(popup, dataUrl);
        const blob = await (await fetch(dataUrl)).blob();
        const file = new File([blob], "fasting.png", { type: "image/png" });
        if (navigator.canShare && navigator.canShare({ files: [file] })) {
          await navigator.share({ files: [file], title: "Fasting Today" });
        }
      } catch (err) {
        console.error("Instagram share failed", err);
      }
    });
    shareWhatsAppBtn?.addEventListener("click", async (e) => {
      e.preventDefault();
      try {
        const canvas = await html2canvas(contentEl);
        const dataUrl = canvas.toDataURL("image/png");
        showPreview(popup, dataUrl);
        const text = [
          popup.querySelector(".share-popup__title")?.textContent || "",
          popup.querySelector(".share-popup__summary")?.textContent || ""
        ].join("\n");
        window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, "_blank");
      } catch (err) {
        console.error("WhatsApp share failed", err);
      }
    });
    shareTelegramBtn?.addEventListener("click", async (e) => {
      e.preventDefault();
      try {
        const canvas = await html2canvas(contentEl);
        const dataUrl = canvas.toDataURL("image/png");
        showPreview(popup, dataUrl);
        const text = [
          popup.querySelector(".share-popup__title")?.textContent || "",
          popup.querySelector(".share-popup__summary")?.textContent || ""
        ].join("\n");
        window.open(
          `https://t.me/share/url?url=&text=${encodeURIComponent(text)}`,
          "_blank"
        );
      } catch (err) {
        console.error("Telegram share failed", err);
      }
    });
  }
  function buildSharePayload(popup) {
    const title2 = popup.querySelector(".share-popup__title")?.textContent;
    const summary = popup.querySelector(".share-popup__summary")?.textContent;
    if (!title2 || !summary)
      return null;
    return {
      title: title2,
      text: `${title2}
${summary}`,
      url: window.location.href
    };
  }
  function showPreview(popup, dataUrl) {
    removePreview();
    const img = document.createElement("img");
    img.src = dataUrl;
    img.className = "share-popup__preview";
    Object.assign(img.style, {
      display: "block",
      width: "200px",
      maxWidth: "90%",
      margin: "16px auto",
      borderRadius: "16px",
      boxShadow: "0 8px 20px rgba(0,0,0,0.3)",
      opacity: "0",
      transition: "transform 0.3s ease, opacity 0.3s ease",
      position: "absolute",
      top: "50%",
      marginTop: "-50px",
      transform: "scale(0.8)"
    });
    const contentEl = popup.querySelector(".share-popup__content");
    contentEl.appendChild(img);
    previewImg = img;
    requestAnimationFrame(() => {
      img.style.transform = "scale(1)";
      img.style.opacity = "1";
    });
    setTimeout(() => removePreview(), 1e3);
  }
  function removePreview() {
    if (!previewImg)
      return;
    previewImg.style.transform = "scale(0.8)";
    previewImg.style.opacity = "0";
    previewImg.addEventListener(
      "transitionend",
      () => {
        if (previewImg?.parentNode)
          previewImg.parentNode.removeChild(previewImg);
        previewImg = null;
      },
      { once: true }
    );
  }

  // src/js/main.js
  var title = `<h1 class="app__title" data-i18="app.title">Fasting Time</h1>`;
  var timer = `<div class="timer__container">
  <div id="timer" class="timer">00:00:00</div>
</div>`;
  var dropdown = `
<div class="dropdown" id="locationDropdown">
  <button class="dropdown__toggle" id="dropdownToggle">
    <span class="dropdown__value">Select location</span>
    <span class="dropdown__arrow">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="8" viewBox="0 0 14 8" fill="none">
        <path d="M13 1L7 7L1 1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </span>
  </button>
  <div class="dropdown__menu-wrapper">
    <div class="dropdown__menu-content">
      <ul class="dropdown__menu" id="dropdownMenu"></ul>
    </div>
  </div>
</div>`;
  var quoteTpl = `<div id="quote" class="app__quote"></div>`;
  var dayTpl = `<div id="day" class="app__date"></div>`;
  var appElement = document.getElementById("app");
  if (appElement) {
    appElement.innerHTML = `
    <div class="app__overlay">
      ${title}
      <div class="app__content">
        ${dayTpl}
        ${dropdown}
      </div>
      ${timer}
      ${quoteTpl}
    </div>
  `;
  }
  var timerId = null;
  function saveLocation(city) {
    localStorage.setItem("selectedLocation", city);
  }
  async function loadCity(city, locationLabel = city) {
    saveLocation(city);
    try {
      const { lat, lon } = await getCoords(city);
      const { fajr, maghrib } = await getPrayerTimes(lat, lon);
      const now2 = /* @__PURE__ */ new Date();
      state.currentDate = now2;
      const isNightNow = now2 >= maghrib || now2 < fajr;
      setMode(isNightNow ? "night" : "day");
      state.currentLocationLabel = locationLabel;
      state.currentLocationQuery = city;
      if (timerId) {
        clearInterval(timerId);
        timerId = null;
      }
      renderHolidayDay(now2);
      const todayKey = now2.toISOString().slice(0, 10);
      if (!state.lastFajrDate || state.lastFajrDate !== todayKey) {
        state.lastFajrDate = todayKey;
        renderQuote(pickDailyQuote(todayKey, i18n.getLanguage()));
      }
      if (isNightNow) {
        renderTimer("night-complete");
      } else {
        timerId = startTimer(maghrib, (value) => renderTimer(value), () => {
          renderTimer("night-complete");
          setMode("night");
          const now3 = /* @__PURE__ */ new Date();
          const todayKey2 = now3.toISOString().slice(0, 10);
          state.lastFajrDate = todayKey2;
          renderQuote(pickDailyQuote(todayKey2, i18n.getLanguage()));
          renderHolidayDay(now3);
        });
      }
    } catch (err) {
      console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0433\u043E\u0440\u043E\u0434\u0430:", err);
      renderQuote(`${i18n.t("error.cityNotFound")} "${city}"`);
      renderTimer("00:00:00");
    }
  }
  var now = /* @__PURE__ */ new Date();
  var fajrTime = /* @__PURE__ */ new Date();
  fajrTime.setHours(5, 30, 0);
  var maghribTime = /* @__PURE__ */ new Date();
  maghribTime.setHours(17, 30, 0);
  var isNightOnLoad = now > maghribTime || now < fajrTime;
  setMode(isNightOnLoad ? "night" : "day");
  i18n.init();
  renderHolidayDay(now);
  initDropdown(loadCity);
  document.addEventListener("DOMContentLoaded", () => {
    initSharePopup();
    initShareActions();
    i18n.updateDOM();
    document.querySelectorAll(".lang-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        const lang = btn.getAttribute("data-lang");
        i18n.setLanguage(lang);
        const dropdownValue = document.querySelector(".dropdown__value");
        if (dropdownValue) {
          const savedLocation = localStorage.getItem("selectedLocation");
          dropdownValue.textContent = savedLocation || i18n.t("dropdown.placeholder");
        }
        if (window.updateDropdownLabels) {
          window.updateDropdownLabels();
        }
        const now2 = /* @__PURE__ */ new Date();
        renderQuote(pickDailyQuote(now2.toISOString().slice(0, 10), lang));
        renderHolidayDay(now2);
      });
    });
  });
  document.querySelector(".footer__btn")?.addEventListener("click", () => {
    openSharePopup({
      date: /* @__PURE__ */ new Date(),
      locationLabel: state.currentLocationLabel
    });
  });
})();
